function bind(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,function(){n.call(e)})}function linkBtn(){function e(){tweenMove({obj:$(".content_fixed").get(0),oTarget:{translateY:-o},iTime:500,iType:"backOut"}),setTimeout(function(){tweenMove({obj:$(".content_fixed").find(".link_btn").get(0),oTarget:{translateY:130,translateX:20,scale:50,rotate:360,opacity:0},iTime:500,iType:"backIn",fnEnd:function(){$(".content_fixed").removeClass("hide"),tweenMove({obj:$(".content_fixed").find(".close").get(0),oTarget:{rotate:90,opacity:100},iTime:200,iType:"linear",fnEnd:function(){n=!1,setCss3($(".content_fixed").find(".close").get(0),"rotate",0),setCss3($(".content_fixed").find(".link_btn").get(0),"rotate",0)}})}})},300)}function t(){tweenMove({obj:$(".content_fixed").get(0),oTarget:{translateY:10},iTime:500,iType:"backIn"}),tweenMove({obj:$(".content_fixed").find(".close").get(0),oTarget:{scale:100,rotate:90,opacity:0},iTime:500,iType:"backIn",fnEnd:function(){$(".content_fixed").addClass("hide")}}),setTimeout(function(){tweenMove({obj:$(".content_fixed").find(".close").get(0),oTarget:{scale:120,rotate:90,opacity:0},iTime:200,iType:"backIn",fnEnd:function(){tweenMove({obj:$(".content_fixed").find(".link_btn").get(0),oTarget:{translateY:0,translateX:0,scale:100,rotate:360,opacity:100},iTime:200,iType:"backOut",fnEnd:function(){n=!0,setCss3($(".content_fixed").find(".close").get(0),"rotate",0),setCss3($(".content_fixed").find(".link_btn").get(0),"rotate",0)}})}})},600)}var n=!0,o=$(".content_fixed").height()-10;setCss3($(".content_fixed").get(0),"translateY",10),$(".content_fixed").find(".link_btn").on("touchend",function(){n&&e()}),$(".content_fixed").find(".close").on("touchend",function(){n||t()})}var test={init:function(){var e=this;e.bindevent()},bindevent:function(){var e=test,t=0,n=0;bind(document,"touchstart",function(e){var e=e||event,o=e.changedTouches[0];t=o.pageX,n=o.pageY}),bind(document,"touchend",function(o){function i(t){if(t==document)return!1;d=t.dataset||$(t).data();for(a in d)r++;if(1>r){if(f=t.parentNode,f==document)return!1;i(f),r=0}else for(b in d)e.clickArea[b]&&e.clickArea[b]({obj:f,ev:o,target:d[b]})}var o=o||event,c=o.target||o.srcElement,d=c.dataset||$(c).data(),f=c.parentNode,r=0,s=o.changedTouches[0];if(Math.abs(t-s.pageX)>10||Math.abs(n-s.pageY)>10)return!1;for(a in d)r++;if(1>r)i(f),r=0;else for(b in d)e.clickArea[b]&&e.clickArea[b]({obj:c,ev:o,target:d[b]})})}};test.init(),test.clickArea={applaud:function(e){$.ajax({url:"/api.php/user/upVote",type:"post",data:{module:"example_module",moduleId:e.target},success:function(t){var t=JSON.parse(t);console.log(t.voteCount),$(e.obj).find("em").html(t.voteCount),$(e.obj).css("position","relative"),$('<div class="add">&nbsp;</div>').appendTo($(e.obj)),tweenMove({obj:$(e.obj).find(".add").get(0),oTarget:{width:24,height:24,top:-24,marginLeft:10,opacity:100},iTime:300,iType:"backOut",fnEnd:function(){setTimeout(function(){tweenMove({obj:$(e.obj).find(".add").get(0),oTarget:{width:0,height:0,top:0,marginLeft:0,opacity:0},iTime:300,iType:"backOut"})},500)}})},error:function(){tweenMove({obj:$(e.obj).get(0),oTarget:{translateX:7},iTime:50,iType:"backOut",fnEnd:function(){tweenMove({obj:$(e.obj).get(0),oTarget:{translateX:-6},iTime:45,iType:"backOut",fnEnd:function(){tweenMove({obj:$(e.obj).get(0),oTarget:{translateX:5},iTime:40,iType:"backOut",fnEnd:function(){tweenMove({obj:$(e.obj).get(0),oTarget:{translateX:-4},iTime:35,iType:"backOut",fnEnd:function(){tweenMove({obj:$(e.obj).get(0),oTarget:{translateX:3},iTime:30,iType:"backOut",fnEnd:function(){tweenMove({obj:$(e.obj).get(0),oTarget:{translateX:-2},iTime:25,iType:"backOut",fnEnd:function(){tweenMove({obj:$(e.obj).get(0),oTarget:{translateX:1},iTime:20,iType:"backOut",fnEnd:function(){tweenMove({obj:$(e.obj).get(0),oTarget:{translateX:0},iTime:15,iType:"backOut"})}})}})}})}})}})}})}})}})}};